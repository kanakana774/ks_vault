# 導入：なぜ webAPI なのか

## **1\. イントロダクション**

### なぜ**Web API** なのか。。。

- webAPI とは、大雑把に言うと、インターネットを介してアプリケーション同士が機能やデータを共有するためのもの。
- 先ほど説明した web サイトで利用されている例は一例にすぎず、実際はインターネット通信を含むほとんどのシステムで利用されている。

  - クライアントからの利用

    - PC/スマホ問わずブラウザアプリ（google chrome、safari など）で web サイトを見るとき
    - スマホアプリ（SNS、ショッピング、news、動画、地図 など）
      - 例
        - LINE がトーク履歴や通知を取得するための内部 API
        - 楽天市場アプリがユーザーの注文履歴を表示するための API
        - メルカリが商品一覧や購入履歴を取得するための API

  - サーバーからの利用
    - 例えば、天気を見れる wetherNews みたいなアプリを作ろうと思ったときに、一般公開されている天気を知れる API を呼び出して DB に保持しておいて、クライアントからリクエストがあったら表示みたいなこともできる

**なぜ Web API が主流なのか**

- **シンプルさ**: HTTP と JSON は、開発者が理解しやすいシンプルな仕組みです。
- **汎用性**: ブラウザ、モバイルアプリ、IoT デバイスなど、あらゆるプラットフォームで利用できます。
- **拡張性**: 異なる技術スタックのシステム同士でも、Web API を介して容易に連携できます。

### ⇒ webAPI は、インターネット経由で自由に呼び出し可能なプログラムと言える

<details>
<summary>通信の有無でシステムを分けてみる</summary>

## **2\. システムの分類：通信の有無**

webAPI の立ち位置を示すために、世のシステムを 通信するかしないかの 2 種類に分類してみる。

### **(1) 通信しないシステム（スタンドアロン型）**

外部のネットワークやサーバーに依存せず、単体で完結するシステムです。

- **PC アプリケーション / ローカルアプリケーション**: CAD ソフト、会計ソフト、画像編集ソフトなど。
- **オフラインゲーム**: インターネット接続がなくても遊べるゲーム。
- **組み込み機器**: 家電や自動車の内部制御など、単独で動作する機器。

### **(2) 通信するシステム（クライアント/サーバ型・分散型）**

外部のサーバーや他のシステムと通信して機能するシステムです。現代の多くのサービスがこれに該当します。

## **3\. 通信するシステムの分類：Web API の有無**

次に、通信するシステムをさらに詳しく見ていきます。ここで重要なのが、**Web API** を使っているか、使っていないかです。

### **(1) Web API を使うもの**

**HTTP ベースの通信プロトコル**（HTTP、HTTPS）を用いて、アプリケーション間でデータのやり取りを行う方式です。データの形式は **JSON** が主流です。

- **Web システム / SPA（Single Page Application）**
  - 例：React, Vue, Angular などで作られた Web サイト。ユーザーインターフェース（UI）はブラウザ上で動き、必要なデータを Web API 経由でサーバーから取得します。
- **モバイルアプリ**
  - 例：Instagram や X（旧 Twitter）、FinTech アプリ。アプリ自体はスマートフォンにインストールしますが、サーバーとの通信に Web API を使っています。
- **クラウドサービス / SaaS 連携**
  - 例：Salesforce, Slack, Google API, GitHub API など。これらのサービスは、外部のシステムが機能を呼び出せるように Web API を公開しています。
- **マイクロサービス**
  - 例：一つの大きなシステムを小さなサービスの集まりに分割するアーキテクチャ。サービス間の通信に Web API（REST や gRPC）を利用します。

**なぜ Web API が主流なの？**

- **シンプルさ**: HTTP と JSON は、開発者が理解しやすいシンプルな仕組みです。
- **汎用性**: ブラウザ、モバイルアプリ、IoT デバイスなど、あらゆるプラットフォームで利用できます。
- **拡張性**: 異なる技術スタックのシステム同士でも、Web API を介して容易に連携できます。

### **(2) Web API 以外の通信を使うもの**

HTTP を使わない、または API 形式ではない通信方式です。

- **メッセージング / PubSub 型**
  - 例：Apache Kafka, RabbitMQ, MQTT。非同期的なデータ伝送に特化しており、金融取引や大規模なリアルタイム処理で使われます。
- **独自バイナリプロトコル**
  - 例：オンラインゲームや一部の IoT デバイス。リアルタイム性を重視し、通信量を抑えるために、独自の形式でデータをやり取りします。
- **金融・産業系専用プロトコル**
  - 例：金融機関の国際送金で使われる SWIFT、製造業で使われる OPC-UA など。業界特有の標準規格です。
- **DB 直結型**
  - 例：クライアント PC から直接データベースに接続する古いシステム（ODBC/JDBC）。現在はセキュリティやスケーラビリティの観点から推奨されません。
- **リモートオブジェクト呼び出し**
  - 例：CORBA, Java RMI など。分散システムの黎明期に使われましたが、現在はほとんどレガシーとなっています。

## **4\. なぜ Web API を学ぶべきなのか？**

現代のソフトウェア開発は、**Web API を中心に動いています**。

- Web、モバイル、クラウド、IoT、マイクロサービスといった、**主要な開発分野で Web API が不可欠**です。
- Web API を学ぶことは、これらの分野で通用する**最も汎用性の高いスキル**を身につけることにつながります。
- 複雑なシステムや異なる技術を組み合わせる際にも、Web API は共通の「言語」として機能します。

---

# **Web API の具体的なサービス例**

## **1\. Web システムと API**⇐ 要は web アプリの裏で API 呼び出し

現代のウェブサイトの多くは、見た目とデータを分離して作られています。ユーザーがブラウザで見る UI（ユーザーインターフェース）は、React や Vue といった JavaScript のフレームワークで構築され、必要なデータは Web API 経由でサーバーから取得します。

### **例：X（旧 Twitter）ブラウザで操作 X 見る人いないか・・・**

- **タイムラインの表示**: ログイン後、Web API にリクエストを送り、最新のツイートやユーザー情報を取得します。
- **ツイートの投稿**: ツイートを投稿する際、入力したテキストを Web API 経由でサーバーに送信します。
- **「いいね」**: 「いいね」ボタンを押すと、その操作を Web API に伝えることで、サーバー側のデータが更新されます。

**ポイント**: ページ全体を再読み込みすることなく、タイムラインがリアルタイムに更新されるのは、この仕組みのおかげです。ニュースサイトや EC サイト（Amazon、楽天など）も、商品リストや在庫情報を Web API で取得しています。

## **2\. モバイルアプリと API**⇒ 要はモバイルアプリの裏から API 呼び出し

スマートフォンアプリの多くも、Web システムと同様に API を利用しています。アプリそのものはスマートフォンにインストールされますが、データのやり取りは Web API を通じて行われます。ちなみにデスクトップで動くものをデスクトップアプリと呼び、モバイルとかデスクトップアプリをひっくるめてネイティブアプリ（各 OS に対してネイティブ）と呼びます。ただ、近年はクロスプラットフォームリリースの開発コストからネイティブなアプリはそこまで良い方法ではなく、どのプラットフォームでも動くような開発がメジャーかと思われます。

### **例：Instagram**

- **写真のアップロード**: 撮影した写真をサーバーに送信する際、Web API を利用します。
- **フォロワー情報の取得**: フォロー中のユーザーのプロフィールや投稿を取得する際、Web API にリクエストを送ります。
- **ダイレクトメッセージ**: メッセージの送受信も Web API が使われています。

**ポイント**: モバイル通信の環境でも快適に動作するよう、軽量な JSON 形式のデータが API でやり取りされています。LINE や Uber Eats など、チャット・配車・フードデリバリー系のアプリも、ほぼ 100% API 通信です。

## **3\. 外部サービス連携と API**⇒ 要はサーバーからもクライアントからも呼び出せますよと

多くの企業が、自社のサービスを外部のアプリケーションと連携させるために Web API を公開しています。これにより、新しいサービスやツールが生まれやすくなります。

### **例：Google Maps API**⇒ クライアントの js から呼んでる（おそらく）

- **地図の埋め込み**: 企業のウェブサイトで店舗の場所を表示したり、不動産サイトで物件の位置を示す際、Google Maps API を利用します。
- **経路検索**: アプリケーション上で出発地から目的地までの経路を検索する機能も、Google Maps API によって実現されています。

### **例：決済サービス API（Stripe など）**

- **オンライン決済**: EC サイトやサブスクリプションサービスでクレジットカード決済を導入する際、決済サービスが提供する Web API を利用します。セキュリティが厳格な決済情報を自社で管理することなく、安全に取引を処理できます。

**ポイント**: 公開されている API を利用することで、ゼロから開発する必要がなくなり、開発コストと時間を大幅に削減できます。他にも、Google Drive や Dropbox などの**クラウドストレージ API**、Google や Apple の ID でログインできる**SNS ログイン API**、そして**Salesforce や Slack、GitHub などの業務 SaaS 連携 API**などが広く使われています。

## **4\. Web API が浸透しているその他の分野**

Web システム、モバイル、外部サービス連携の 3 つの柱以外にも、Web API は様々な分野で利用されています。

### **(1) IoT と API**

**スマート家電**が天気予報や音楽を再生する際に、Web API 経由でデータを取得しています。また、産業用 IoT においても、センサーから収集した情報をクラウドに送信するために Web API が利用されています。

### **(2) ゲームと API**

スマートフォンゲームのガチャ結果やランキング表示は、Web API 経由でサーバーと通信しています。家庭用ゲーム機（Switch や PS）でも、アカウント認証、課金、マルチプレイのマッチングなどに Web API が使われています。

### **(3) 業務システム（BtoB）と API**

企業間のシステム連携でも Web API は不可欠です。例えば、会計システムが銀行の API を利用して口座明細を自動取得したり、物流システムが運送会社の API で荷物の追跡情報を取得したりしています。

## **まとめ**

Web API は、現代のソフトウェア開発において、異なるシステムやサービスを連携させるための共通言語となっています。Web サービス、モバイルアプリ、外部サービス連携といった王道の分野に加え、IoT、ゲーム、業務システムでも Web API が広く利用されています。

</details>

<details>
<summary>歴史を軽く</summary>

### web の歴史と Web API の進化

ウェブアプリケーションの歴史は、ユーザー体験の向上と、データの処理方法の進化によって特徴づけられます。
特に、Web API は、その進化の各段階で重要な役割を果たしてきました。

> ⇒ 要は最初はバックエンドサーバー間の利用から始まり、近年では、いろんな呼ばれ方をしますという話。

#### 1. 静的ウェブサイト (1990 年代)

- 特徴: サーバーから HTML ファイルをそのまま配信する。
- ユーザー体験: ユーザーがリンクをクリックするたびに、新しいページ全体がロードされる。
- API の役割: 当時は Web API の概念はまだなく、サーバー側でデータベースから取得したデータを HTML に埋め込んでいました。

#### 2. 動的ウェブサイトと CGI (1990 年代後半)

- 特徴: CGI（Common Gateway Interface）などの技術が登場し、サーバー側でプログラムが動的に HTML を生成するようになる。
- ユーザー体験: フォームの送信など、ユーザーの操作に応じて動的にコンテンツが生成される。
- API の役割: バックエンドサーバー内でのみ、内部的なデータのやり取りに利用されていました。外部に公開される API はまだ一般的ではありませんでした。

#### 3. AJAX の登場と Web 2.0 (2000 年代中盤)

- 特徴: Asynchronous JavaScript and XML（AJAX）が普及。JavaScript が XML や JSON 形式のデータをサーバーから非同期で取得し、ページの特定部分だけを更新する技術が確立。
- ユーザー体験: ページ全体をリロードすることなく、コンテンツを更新できるようになり、Google Maps や Gmail などの SPA（Single Page Application）の先駆けとなるアプリケーションが登場。
- API の役割: ここで、ウェブサーバーが HTML ではなく JSON などのデータを返す API が広く使われるようになりました。これは、フロントエンド（ブラウザ）からバックエンドサーバーの API が直接呼ばれる、という現在の形式の始まりです。

#### 4. SPA（Single Page Application）の発展 (2010 年代)

- 特徴: Angular, React, Vue.js といった JavaScript フレームワークの登場により、フロントエンドがより複雑なロジックを持つようになり、SPA 開発が主流に。
- ユーザー体験: PC アプリケーションのような滑らかな操作感を実現。
- API の役割: フロントエンドは主にデータを取得・送信する役割に特化し、バックエンドはデータのみを提供する「Web API」として機能するようになります。この頃から、RESTful API の設計思想が広く普及しました。

#### 5. SSR, Jamstack, Edge Computing (2010 年代後半〜現在)

- 特徴:SSR (Server-Side Rendering): 初期表示の速さや SEO 対策のために、サーバー側で HTML を生成してからクライアントに送る手法が再び見直される。
- Jamstack: JavaScript、API、Markup の組み合わせで静的なサイトを生成し、API で動的な機能を追加するアーキテクチャ。
  Edge Computing: CDN（Content Delivery Network）のエッジサーバーで処理を行うことで、ユーザーにより近い場所でコンテンツを配信・処理し、レイテンシを削減する。
- ユーザー体験: より高速で、SEO に強いアプリケーションが作れるように。
- API の役割: マイクロサービスアーキテクチャの普及とともに、バックエンドはより細分化され、複数の API を組み合わせて一つのアプリケーションを構築するケースが増加しました。
</details>
