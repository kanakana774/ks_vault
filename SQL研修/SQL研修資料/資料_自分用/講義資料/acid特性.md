SQL の ACID 特性は、データベースのトランザクション処理において、データの信頼性と整合性を保証するための 4 つの重要な性質を指します。 ACID は、それぞれの性質を表す英単語の頭文字を取ったものです。

以下に、それぞれの特性について具体例を交えながら整理します。

### 1. 原子性（Atomicity）

**概要**: トランザクションに含まれる一連の処理が「すべて成功する」か「すべて失敗する」かのどちらかであることを保証する性質です。 中途半端な状態で処理が終わることがないため、データの矛盾を防ぎます。

**具体例：銀行の口座振替**
A さんの口座から B さんの口座へ 1 万円を送金する場合、このトランザクションは以下の 2 つの処理で構成されます。

- 処理 1：A さんの口座残高から 1 万円を減らす
- 処理 2：B さんの口座残高に 1 万円を足す

原子性が保証されている場合、処理 1 と処理 2 が両方とも正常に完了して初めて、トランザクションは「成功」となります。 もし、処理 1 は成功したものの、システム障害などで処理 2 が失敗した場合、トランザクション全体が「失敗」とみなされ、処理 1 の変更も取り消されます（ロールバック）。 これにより、「A さんの残高だけが減って、B さんの残高は増えない」といった事態を防ぐことができます。

### 2. 一貫性（Consistency）

**概要**: トランザクションの実行前後で、データベースの状態が常に整合性の取れた状態に保たれることを保証する性質です。 データの矛盾を生じさせるような処理は実行されません。

**具体例：在庫管理システム**
ある EC サイトで、在庫が 10 個ある商品に対して 5 個の注文が入ったとします。

- トランザクション開始前の在庫数：10 個
- トランザクション：注文処理（在庫を 5 個減らす）
- トランザクション完了後の在庫数：5 個

一貫性が保たれているデータベースでは、このトランザクションの前後で在庫数がマイナスになることはありません。また、「在庫数は 0 以上でなければならない」といったデータベースに予め設定されたルール（制約）に違反するようなトランザクションは中断されます。 例えば、在庫が 3 個しかないのに 5 個注文するような処理は、一貫性を保つために失敗します。

### 3. 独立性（Isolation）

**概要**: 複数のトランザクションを同時に実行した場合でも、それぞれの処理が互いに干渉せず、あたかも一つずつ順番に実行されているかのように見えることを保証する性質です。

**具体例：チケット予約システム**
人気コンサートのチケットを、A さんと B さんが同時に同じ席を予約しようとしています。

- トランザクション A：A さんが座席 X を予約する
- トランザクション B：B さんが座席 X を予約する

もし独立性がなければ、A さんと B さんの処理が同時に行われ、同じ座席が二重に予約されてしまう可能性があります。独立性が保証されている場合、どちらか一方のトランザクションが完了するまで、もう一方は待たされるか、あるいはエラーとなります。 これにより、各トランザクションが他の処理の影響を受けずに実行され、データの整合性が保たれます。

### 4. 永続性（Durability）

**概要**: トランザクションが一度正常に完了（コミット）したら、その結果はシステム障害が発生しても失われないことを保証する性質です。

**具体例：オンラインショッピングでの購入確定**
ユーザーが購入ボタンをクリックし、決済処理が完了したという通知を受け取ったとします。

この購入確定処理がトランザクションとしてコミットされた後、たとえデータベースサーバーがクラッシュしたり、停電が発生したりしても、その購入記録は失われません。 システムが復旧した際には、購入が完了した状態がデータベースに正しく保存されています。これは通常、ハードディスクなどの永続的な記憶装置に変更履歴が記録されることで実現されます。
