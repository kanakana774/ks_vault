### 基本の注意点ガイド

#### 1. 半角英数字で書くのが大原則

**一番重要で、最も多い間違いが「全角文字」の使用です。** SQLの命令やテーブル名、列名などを書くときは、必ず半角の英数字と記号を使ってください。

*   **括弧（）や引用符（'）、カンマ（,）**：これらは全て半角で入力します。見た目が似ていても、全角の（）や’、，が一つでも混ざっているとエラーになります。
*   **スペース**：単語を区切るためのスペースも、必ず半角スペースを使用してください。 全角スペースはエラーの原因になります。

**悪い例：**
```sql
ＳＥＬＥＣＴ　＊　ＦＲＯＭ　商品マスタ　ＷＨＥＲＥ　価格　＞＝　１００；
```

**良い例：**
```sql
SELECT * FROM products WHERE price >= 100;
```

---

#### 2. 文の終わりにはセミコロン（;）を忘れずに

SQL文の終わりには、原則としてセミコロン（;）を付けます。 これによって、どこまでが一つの命令なのかをデータベースが判断します。**複数のSQL文を連続して実行する場合は**、セミコロンが区切りになります。

```sql
SELECT * FROM users;
```

---

#### 3. 文字列はシングルクォーテーション（'）で囲む

'suzuki' や '東京都' のような文字列のデータを扱う際は、必ずシングルクォーテーション（'）で囲みます。 数字を扱う場合は囲む必要はありません。

*   **文字列：** `name = 'suzuki'`
*   **数値：** `age = 25`

**注意：** ダブルクォーテーション（"）は使わないようにしましょう。データベースによってはエラーになることがあります。

---

#### 4. 大文字と小文字の使い分け

SQLの命令語（`SELECT`, `FROM`, `WHERE`など）は、大文字と小文字を区別しないデータベースが多いです。 しかし、テーブル名や列名は大文字と小文字を区別するデータベースもあるため注意が必要です。

読みやすさの観点から、以下のようにルールを決めておくと良いでしょう。

*   **SQLの命令語（予約語）は`大文字`**
*   **テーブル名や列名は`小文字`**

こうすることで、どれが命令でどれが操作対象なのかが一目で分かりやすくなります。

```sql
-- 読みやすい例
SELECT user_name, email FROM users WHERE age > 20;

-- 読みにくい例
select USER_NAME, EMAIL from USERS where AGE > 20;
```

==⇒pgAdminの機能でフォーマットするとすべて大文字になってしまうので、研修中は大文字でも大丈夫です。==

---

#### 5. よくあるエラーとその原因

最初は誰でもエラーに遭遇します。慌てずに原因を探ることが大切です。

| よくあるエラーメッセージ | 主な原因 |
| :--- | :--- |
| `Syntax error` (構文エラー) | スペルミス、カンマの抜けや余分、括弧の閉じ忘れ、キーワードの順番間違い |
| `Table or View does not exist` | テーブル名のスペルミス、存在しないテーブルを指定している |
| `Invalid column name` | 列名（カラム名）のスペルミス、そのテーブルに存在しない列を指定している |

エラーが出たときは、まず「**スペルミス**」と「**全角文字が混ざっていないか**」を重点的に確認しましょう。

---

#### 6. 可読性を高めるための習慣

自分だけでなく、他の人が見ても分かりやすいSQLを書くことは非常に重要です。

*   **改行とインデント（字下げ）を使う**：`SELECT`, `FROM`, `WHERE`などの句ごとに行を分けると、コードの構造が理解しやすくなります。
*   **コメントを活用する**：ハイフン2つ（`--`）の後ろ、または `/*` と `*/` で囲まれた部分はコメントになり、SQLの実行に影響を与えません。 複雑な処理の意図などをメモしておくと、後で見返したときに役立ちます。

**整形された読みやすい例：**
```sql
-- 20歳以上で東京都在住のユーザー情報を取得する
SELECT
    user_id,      -- ユーザーID
    user_name     -- ユーザー名
FROM
    users         -- usersテーブルから
WHERE
    age >= 20
    AND address = '東京都';
```

これらの基本的な注意点を守ることで、エラーを減らし、スムーズにSQLを学習することができます。たくさん書いて、少しずつ慣れていきましょう。


---
### フォーマッター設定変更の手順

1.  pgAdminの上部メニューから **[File]** を選択します。
2.  ドロップダウンメニューから **[Preferences]** をクリックします。
3.  左側のツリーから **[SQL Editor]** を展開し、その中の **[SQL formatting]** を選択します。
4.  右側に表示されたオプションの中から、大文字・小文字に関する以下の項目を好みに合わせて変更します。

    *   **Keyword case**: `SELECT`や`FROM`などのSQL予約語のスタイルを設定します。
        *   **`Upper case`** に設定するのが一般的です。

    *   **Identifier case**: テーブル名や列名などの識別子のスタイルを設定します。
        *   書いたままのスタイルを維持したい場合は **`No change`** を選択します。
        *   すべて小文字に統一したい場合は **`Lower case`** を選択します。

    *   **Function case**: `SUM()`や`COUNT()`などの関数名のスタイルを設定します。
        *   こちらも **`Upper case`** や **`No change`** がよく使われます。

    *   **Data type case**: `INTEGER`や`VARCHAR`などのデータ型名のスタイルを設定します。
        *   **`Lower case`** や **`Upper case`** など、好みに合わせて設定します。

### おすすめの設定例

SQLの可読性を高める一般的なスタイルに合わせるなら、以下のような設定がおすすめです。

| オプション | 設定値 | 説明 |
| :--- | :--- | :--- |
| **Keyword case** | **`Upper case`** | SQL予約語を大文字にします (例: `SELECT`) |
| **Identifier case** | **`No change`** | テーブル名、列名を変更しません (例: `users`) |
| **Function case** | **`Upper case`** | 関数名を大文字にします (例: `COUNT()`) |
| **Data type case** | **`Lower case`** | データ型名を小文字にします (例: `integer`) |

### 設定の保存と適用

1.  設定を変更したら、右下の **[Save]** ボタンをクリックして保存します。

![[フォーマッター設定変更.png]]