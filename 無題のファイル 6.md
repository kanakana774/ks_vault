Spring BootでHTTPリクエストのクエリパラメータを受け取るには、主に2つの方法があります。リクエストの内容に応じて使い分けることが推奨されます。

### 1. `@RequestParam` アノテーションを使用する方法

コントローラーのメソッドの引数に `@RequestParam` アノテーションを付与することで、個別のクエリパラメータを受け取ることができます。これは最も基本的で一般的な方法です。

**基本的な使い方**

URL `http://localhost:8080/search?keyword=spring` の `keyword` パラメータを受け取る例です。

```java
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class SearchController {

    @GetMapping("/search")
    public String search(@RequestParam String keyword) {
        return "検索キーワード: " + keyword;
    }
}
```

#### `@RequestParam` の便利な属性

`@RequestParam` には、挙動を細かく制御するための属性が用意されています。

*   **`name` (または `value`)**: クエリパラメータ名と引数名が異なる場合に指定します。
    ```java
    // URL: /search?q=spring
    @GetMapping("/search")
    public String search(@RequestParam(name = "q") String keyword) {
        return "検索キーワード: " + keyword;
    }
    ```

*   **`required`**: パラメータが必須かどうかを指定します（デフォルトは `true`）。 `false` に設定すると、パラメータが存在しなくてもエラーになりません。
    ```java
    // URL: /search または /search?keyword=spring
    @GetMapping("/search")
    public String search(@RequestParam(required = false) String keyword) {
        if (keyword == null) {
            return "キーワードが指定されていません。";
        }
        return "検索キーワード: " + keyword;
    }
    ```

*   **`defaultValue`**: パラメータが省略された場合や値が空の場合のデフォルト値を設定します。 `defaultValue` を設定すると、`required` は自動的に `false` として扱われます。
    ```java
    // URL: /search の場合、keywordには "guest" が入る
    @GetMapping("/search")
    public String search(@RequestParam(defaultValue = "guest") String keyword) {
        return "検索キーワード: " + keyword;
    }
    ```

#### 複数の値を配列やリストで受け取る

同じ名前のクエリパラメータが複数ある場合、配列や `List<String>` で受け取ることができます。

URL: `http://localhost:8080/filter?category=tech&category=life`

```java
import java.util.List;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class FilterController {

    @GetMapping("/filter")
    public String filter(@RequestParam List<String> category) {
        return "カテゴリ: " + String.join(", ", category); // "カテゴリ: tech, life"
    }
}
```

#### すべてのクエリパラメータをMapで受け取る

キーが不定数のクエリパラメータをまとめて受け取りたい場合は、`Map<String, String>` を使用できます。

URL: `http://localhost:8080/params?name=user1&age=30`

```java
import java.util.Map;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class ParamsController {

    @GetMapping("/params")
    public String getAllParams(@RequestParam Map<String, String> allParams) {
        return "受け取ったパラメータ: " + allParams.toString(); // "受け取ったパラメータ: {name=user1, age=30}"
    }
}
```

### 2. DTO (Data Transfer Object) を使用する方法

複数のクエリパラメータをまとめてオブジェクトとして受け取りたい場合は、DTO（データ転送オブジェクト）を作成する方法が便利です。 これにより、関連するパラメータを一つのクラスにまとめることができ、コードの可読性や保守性が向上します。

**1. DTOクラスの作成**
まず、受け取りたいクエリパラメータに対応するフィールドとセッター/ゲッターを持つクラスを作成します。

```java
public class SearchForm {
    private String keyword;
    private String category;
    private Integer page;

    // セッターとゲッターを省略
}```

**2. コントローラーでDTOを受け取る**
次に、コントローラーのメソッドの引数に作成したDTOクラスを指定します。Spring Bootが自動的にクエリパラメータをDTOのフィールドにマッピングします。

```java
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class SearchController {

    @GetMapping("/advanced-search")
    public String advancedSearch(SearchForm searchForm) { // @ModelAttributeは省略可能
        return "キーワード: " + searchForm.getKeyword() +
               ", カテゴリ: " + searchForm.getCategory() +
               ", ページ: " + searchForm.getPage();
    }
}
```

この場合、`http://localhost:8080/advanced-search?keyword=spring&category=tech&page=1` のようなリクエストを送信すると、`SearchForm` オブジェクトに各値が設定されます。

### まとめ

| 方法 | 特徴 | 使い分け |
| --- | --- | --- |
| **`@RequestParam`** | 個別のパラメータをシンプルに受け取る。`required`や`defaultValue`で細かな制御が可能。 | 2〜3個程度の少ないパラメータを受け取る場合に適している。 |
| **DTO (オブジェクト)** | 関連する複数のパラメータをまとめてオブジェクトとして扱える。コードが整理され、管理しやすくなる。 | パラメータの数が多い場合や、パラメータの組み合わせに意味がある場合に適している。バリデーション（入力チェック）をかけたい場合にも有効。 |